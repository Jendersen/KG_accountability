@prefix mf: <http://www.w3.org/2001/sw/DataAccess/tests/test-manifest#> .
@prefix kgi: <http://ns.inria.fr/kg/index#> .

<> a mf:Manifest ;
    mf:entries (
        <usage_license.ttl>
        <usage_access.ttl>
        <usage_reuse.ttl>
        <usage_requirements.ttl>
    ) .


<usage_license.ttl> a mf:ManifestEntry ;
    kgi:onSuccess (
        [
            mf:action """
                PREFIX prov: <http://www.w3.org/ns/prov#>
                PREFIX dqv: <http://www.w3.org/ns/dqv#>
                PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
                INSERT {
                    ?metadataDescription prov:wasGeneratedBy <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_license.ttl#activity> ;
                        dqv:hasQualityMeasurement ?qualityMeasurement .
                    ?qualityMeasurement a dqv:QualityMeasurement ;
                        rdfs:label "Usage license measurement" ;
                        dqv:computedOn ?endpointDescription ;
                        dqv:isMeasurementOf <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_license.ttl> ;
                        dqv:value "true"^^xsd:boolean ;
                        prov:generatedAtTime $dateLiteral .
                    <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_license.ttl> a dqv:Metric ;
                        rdfs:comment "What is the license of the dataset?" ;
                        rdfs:label "Usage license" .
                    <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_license.ttl#activity> prov:used <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_license.ttl> ;
                        prov:wasAssociatedWith <https://orcid.org/0000-0001-6907-0136> .
                } WHERE {
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Endpoint")) AS ?endpointDescription)
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Metadata")) AS ?metadataDescription)
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(CONCAT( str($rawEndpointUrl), "https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_license.ttl")), "Measure")) AS ?qualityMeasurement)
                }
            """
        ]
     ) ;
    kgi:onFailure (
        [
            mf:action """
                PREFIX prov: <http://www.w3.org/ns/prov#>
                PREFIX dqv: <http://www.w3.org/ns/dqv#>
                PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
                INSERT {
                    ?metadataDescription prov:wasGeneratedBy <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_license.ttl#activity> ;
                        dqv:hasQualityMeasurement ?qualityMeasurement .
                    ?qualityMeasurement a dqv:QualityMeasurement ;
                        rdfs:label "Usage license measurement" ;
                        dqv:computedOn ?endpointDescription ;
                        dqv:isMeasurementOf <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_license.ttl> ;
                        dqv:value "false"^^xsd:boolean ;
                        prov:generatedAtTime $dateLiteral .
                    <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_license.ttl> a dqv:Metric ;
                        rdfs:comment "What is the license of the dataset?" ;
                        rdfs:label "Usage license" .
                    <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_license.ttl#activity> prov:used <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_license.ttl> ;
                        prov:wasAssociatedWith <https://orcid.org/0000-0001-6907-0136> .
                } WHERE {
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Endpoint")) AS ?endpointDescription)
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Metadata")) AS ?metadataDescription)
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(CONCAT( str($rawEndpointUrl), "https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_license.ttl")), "Measure")) AS ?qualityMeasurement)
                }
            """
        ]
     ) .

<usage_access.ttl> a mf:ManifestEntry ;
    kgi:onSuccess (
        [
            mf:action """
                PREFIX prov: <http://www.w3.org/ns/prov#>
                PREFIX dqv: <http://www.w3.org/ns/dqv#>
                PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
                INSERT {
                    ?metadataDescription prov:wasGeneratedBy <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_access.ttl#activity> ;
                        dqv:hasQualityMeasurement ?qualityMeasurement .
                    ?qualityMeasurement a dqv:QualityMeasurement ;
                        rdfs:label "Usage access procedure measurement" ;
                        dqv:computedOn ?endpointDescription ;
                        dqv:isMeasurementOf <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_access.ttl> ;
                        dqv:value "true"^^xsd:boolean ;
                        prov:generatedAtTime $dateLiteral .
                    <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_access.ttl> a dqv:Metric ;
                        rdfs:comment "How to access the dataset? Provide a SPARQL endpoint or a dump if they are freely accessible, or the procedure of access." ;
                        rdfs:label "Usage access procedure" .
                    <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_access.ttl#activity> prov:used <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_access.ttl> ;
                        prov:wasAssociatedWith <https://orcid.org/0000-0001-6907-0136> .
                } WHERE {
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Endpoint")) AS ?endpointDescription)
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Metadata")) AS ?metadataDescription)
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(CONCAT( str($rawEndpointUrl), "https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_access.ttl")), "Measure")) AS ?qualityMeasurement)
                }
            """
        ]
        <usage_isEndpoint.ttl>
     ) ;
    kgi:onFailure (
        [
            mf:action """
                PREFIX prov: <http://www.w3.org/ns/prov#>
                PREFIX dqv: <http://www.w3.org/ns/dqv#>
                PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
                INSERT {
                    ?metadataDescription prov:wasGeneratedBy <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_access.ttl#activity> ;
                        dqv:hasQualityMeasurement ?qualityMeasurement .
                    ?qualityMeasurement a dqv:QualityMeasurement ;
                        rdfs:label "Usage access procedure measurement" ;
                        dqv:computedOn ?endpointDescription ;
                        dqv:isMeasurementOf <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_access.ttl> ;
                        dqv:value "false"^^xsd:boolean ;
                        prov:generatedAtTime $dateLiteral .
                    <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_access.ttl> a dqv:Metric ;
                        rdfs:comment "How to access the dataset? Provide a SPARQL endpoint or a dump if they are freely accessible, or the procedure of access." ;
                        rdfs:label "Usage access procedure" .
                    <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_access.ttl#activity> prov:used <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_access.ttl> ;
                        prov:wasAssociatedWith <https://orcid.org/0000-0001-6907-0136> .
                } WHERE {
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Endpoint")) AS ?endpointDescription)
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Metadata")) AS ?metadataDescription)
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(CONCAT( str($rawEndpointUrl), "https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_access.ttl")), "Measure")) AS ?qualityMeasurement)
                }
            """
        ]
     ) .

<usage_isEndpoint.ttl> a mf:ManifestEntry ;
   kgi:onSuccess (
       <usage_endpoint.ttl>
   ) .

<usage_endpoint.ttl> a mf:ManifestEntry ;
   kgi:onSuccess (
       [
           mf:action """
               PREFIX prov: <http://www.w3.org/ns/prov#>
               PREFIX dqv: <http://www.w3.org/ns/dqv#>
               PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
               PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
               PREFIX void: <http://rdfs.org/ns/void#>
               PREFIX schema: <http://schema.org/>
               PREFIX sd: <http://www.w3.org/ns/sparql-service-description#>
               PREFIX dcat: <http://www.w3.org/ns/dcat#>
               CONSTRUCT {
                   ?metadataDescription prov:wasGeneratedBy <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_endpoint.ttl#activity> ;
                       dqv:hasQualityMeasurement ?qualityMeasurement .
                   ?qualityMeasurement a dqv:QualityMeasurement ;
                       rdfs:label "Usage endpoints characteristics measurement" ;
                       dqv:computedOn ?endpointDescription, ?endpoint ;
                       dqv:isMeasurementOf <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_endpoint.ttl> ;
                       dqv:value "true"^^xsd:boolean ;
                       prov:generatedAtTime $dateLiteral .
                   <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_endpoint.ttl> a dqv:Metric ;
                       rdfs:comment "If an endpoint is provided, what are its characteristics?" ;
                       rdfs:label "Usage endpoints characteristics" .
                   <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_endpoint.ttl#activity> prov:used <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_endpoint.ttl> ;
                       prov:wasAssociatedWith <https://orcid.org/0000-0001-6907-0136> .
               } WHERE {
                   {SELECT DISTINCT ?endpoint WHERE {
                       # Find the KG
                       { ?kg a dcat:Dataset }
                       UNION { ?kg a void:Dataset }
                       ?kg ?endpointLink $rawEndpointUrl .

                       { ?kg void:sparqlEndpoint ?endpoint . }
                       UNION { ?service dcat:servesDataset ?kg .
                               ?service dcat:endpointURL ?endpoint . }
                       UNION { ?kg dcat:accessService ?service .
                               ?service dcat:endpointURL ?endpoint .  }
                       UNION { ?kg dcat:accessService ?service .
                               ?service sd:endpoint ?endpoint . }
                       UNION { ?service dcat:servesDataset ?kg .
                               ?service sd:endpoint ?endpoint . }

                       ?endpoint sd:supportedLanguage ?language .
                       ?endpoint sd:resultFormat ?format .
                   }}
                   BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Endpoint")) AS ?endpointDescription)
                   BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Metadata")) AS ?metadataDescription)
                   BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(CONCAT( str($rawEndpointUrl), "https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_endpoint.ttl", str(?endpoint))), "Measure")) AS ?qualityMeasurement)
               }
           """
       ]
       [
           mf:action """
               PREFIX prov: <http://www.w3.org/ns/prov#>
               PREFIX dqv: <http://www.w3.org/ns/dqv#>
               PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
               PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
               PREFIX void: <http://rdfs.org/ns/void#>
               PREFIX schema: <http://schema.org/>
               PREFIX sd: <http://www.w3.org/ns/sparql-service-description#>
               PREFIX dcat: <http://www.w3.org/ns/dcat#>
               CONSTRUCT {
                   ?metadataDescription prov:wasGeneratedBy <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_endpoint.ttl#activity> ;
                       dqv:hasQualityMeasurement ?qualityMeasurement .
                   ?qualityMeasurement a dqv:QualityMeasurement ;
                       rdfs:label "Usage endpoints characteristics measurement" ;
                       dqv:computedOn ?endpointDescription, ?endpoint ;
                       dqv:isMeasurementOf <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_endpoint.ttl> ;
                       dqv:value "false"^^xsd:boolean ;
                       prov:generatedAtTime $dateLiteral .
                   <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_endpoint.ttl> a dqv:Metric ;
                       rdfs:comment "If an endpoint is provided, what are its characteristics?" ;
                       rdfs:label "Usage endpoints characteristics" .
                   <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_endpoint.ttl#activity> prov:used <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_endpoint.ttl> ;
                       prov:wasAssociatedWith <https://orcid.org/0000-0001-6907-0136> .
               } WHERE {
                   {SELECT DISTINCT ?endpoint WHERE {
                       # Find the KG
                       { ?kg a dcat:Dataset }
                       UNION { ?kg a void:Dataset }
                       ?kg ?endpointLink $rawEndpointUrl .

                       { ?kg void:sparqlEndpoint ?endpoint . }
                       UNION { ?service dcat:servesDataset ?kg .
                               ?service dcat:endpointURL ?endpoint . }
                       UNION { ?kg dcat:accessService ?service .
                               ?service dcat:endpointURL ?endpoint .  }
                       UNION { ?kg dcat:accessService ?service .
                               ?service sd:endpoint ?endpoint . }
                       UNION { ?service dcat:servesDataset ?kg .
                               ?service sd:endpoint ?endpoint . }

                       FILTER NOT EXISTS {
                         ?endpoint sd:supportedLanguage ?language .
                         ?endpoint sd:resultFormat ?format .
                       }
                   }}
                   BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Endpoint")) AS ?endpointDescription)
                   BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Metadata")) AS ?metadataDescription)
                   BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(CONCAT( str($rawEndpointUrl), "https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_endpoint.ttl", str(?endpoint))), "Measure")) AS ?qualityMeasurement)
               }
           """
       ]
    ) ;
   kgi:onFailure (
       [
           mf:action """
               PREFIX prov: <http://www.w3.org/ns/prov#>
               PREFIX dqv: <http://www.w3.org/ns/dqv#>
               PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
               PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
               PREFIX void: <http://rdfs.org/ns/void#>
               PREFIX schema: <http://schema.org/>
               PREFIX sd: <http://www.w3.org/ns/sparql-service-description#>
               PREFIX dcat: <http://www.w3.org/ns/dcat#>
               CONSTRUCT {
                   ?metadataDescription prov:wasGeneratedBy <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_endpoint.ttl#activity> ;
                       dqv:hasQualityMeasurement ?qualityMeasurement .
                   ?qualityMeasurement a dqv:QualityMeasurement ;
                       rdfs:label "Usage endpoints characteristics measurement" ;
                       dqv:computedOn ?endpointDescription, ?endpoint ;
                       dqv:isMeasurementOf <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_endpoint.ttl> ;
                       dqv:value "false"^^xsd:boolean ;
                       prov:generatedAtTime $dateLiteral .
                   <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_endpoint.ttl> a dqv:Metric ;
                       rdfs:comment "If an endpoint is provided, what are its characteristics?" ;
                       rdfs:label "Usage endpoints characteristics" .
                   <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_endpoint.ttl#activity> prov:used <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_endpoint.ttl> ;
                       prov:wasAssociatedWith <https://orcid.org/0000-0001-6907-0136> .
               } WHERE {
                   {SELECT DISTINCT ?endpoint WHERE {
                       # Find the KG
                       { ?kg a dcat:Dataset }
                       UNION { ?kg a void:Dataset }
                       ?kg ?endpointLink $rawEndpointUrl .

                       { ?kg void:sparqlEndpoint ?endpoint . }
                       UNION { ?service dcat:servesDataset ?kg .
                               ?service dcat:endpointURL ?endpoint . }
                       UNION { ?kg dcat:accessService ?service .
                               ?service dcat:endpointURL ?endpoint .  }
                       UNION { ?kg dcat:accessService ?service .
                               ?service sd:endpoint ?endpoint . }
                       UNION { ?service dcat:servesDataset ?kg .
                               ?service sd:endpoint ?endpoint . }
                   }}
                   BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Endpoint")) AS ?endpointDescription)
                   BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Metadata")) AS ?metadataDescription)
                   BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(CONCAT( str($rawEndpointUrl), "https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_endpoint.ttl", str(?endpoint))), "Measure")) AS ?qualityMeasurement)
               }
           """
       ]
    ) .

<usage_reuse.ttl> a mf:ManifestEntry ;
    kgi:onSuccess (
        [
            mf:action """
                PREFIX prov: <http://www.w3.org/ns/prov#>
                PREFIX dqv: <http://www.w3.org/ns/dqv#>
                PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
                INSERT {
                    ?metadataDescription prov:wasGeneratedBy <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_reuse.ttl#activity> ;
                        dqv:hasQualityMeasurement ?qualityMeasurement .
                    ?qualityMeasurement a dqv:QualityMeasurement ;
                        rdfs:label "Usage reuse measurement" ;
                        dqv:computedOn ?endpointDescription ;
                        dqv:isMeasurementOf <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_reuse.ttl> ;
                        dqv:value "true"^^xsd:boolean ;
                        prov:generatedAtTime $dateLiteral .
                    <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_reuse.ttl> a dqv:Metric ;
                        rdfs:comment "How to use, reuse or integrate the dataset?" ;
                        rdfs:label "Usage reuse" .
                    <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_reuse.ttl#activity> prov:used <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_reuse.ttl> ;
                        prov:wasAssociatedWith <https://orcid.org/0000-0001-6907-0136> .
                } WHERE {
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Endpoint")) AS ?endpointDescription)
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Metadata")) AS ?metadataDescription)
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(CONCAT( str($rawEndpointUrl), "https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_reuse.ttl")), "Measure")) AS ?qualityMeasurement)
                }
            """
        ]
     ) ;
    kgi:onFailure (
        [
            mf:action """
                PREFIX prov: <http://www.w3.org/ns/prov#>
                PREFIX dqv: <http://www.w3.org/ns/dqv#>
                PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
                INSERT {
                    ?metadataDescription prov:wasGeneratedBy <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_reuse.ttl#activity> ;
                        dqv:hasQualityMeasurement ?qualityMeasurement .
                    ?qualityMeasurement a dqv:QualityMeasurement ;
                        rdfs:label "Usage reuse measurement" ;
                        dqv:computedOn ?endpointDescription ;
                        dqv:isMeasurementOf <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_reuse.ttl> ;
                        dqv:value "false"^^xsd:boolean ;
                        prov:generatedAtTime $dateLiteral .
                    <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_reuse.ttl> a dqv:Metric ;
                        rdfs:comment "How to use, reuse or integrate the dataset?" ;
                        rdfs:label "Usage reuse" .
                    <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_reuse.ttl#activity> prov:used <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_reuse.ttl> ;
                        prov:wasAssociatedWith <https://orcid.org/0000-0001-6907-0136> .
                } WHERE {
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Endpoint")) AS ?endpointDescription)
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Metadata")) AS ?metadataDescription)
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(CONCAT( str($rawEndpointUrl), "https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_reuse.ttl")), "Measure")) AS ?qualityMeasurement)
                }
            """
        ]
     ) .

<usage_requirements.ttl> a mf:ManifestEntry ;
    kgi:onSuccess (
        [
            mf:action """
                PREFIX prov: <http://www.w3.org/ns/prov#>
                PREFIX dqv: <http://www.w3.org/ns/dqv#>
                PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
                INSERT {
                    ?metadataDescription prov:wasGeneratedBy <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_requirements.ttl#activity> ;
                        dqv:hasQualityMeasurement ?qualityMeasurement .
                    ?qualityMeasurement a dqv:QualityMeasurement ;
                        rdfs:label "Usage requirements measurement" ;
                        dqv:computedOn ?endpointDescription ;
                        dqv:isMeasurementOf <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_requirements.ttl> ;
                        dqv:value "true"^^xsd:boolean ;
                        prov:generatedAtTime $dateLiteral .
                    <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_requirements.ttl> a dqv:Metric ;
                        rdfs:comment "What are the requirements to use the dataset?" ;
                        rdfs:label "Usage requirements" .
                    <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_requirements.ttl#activity> prov:used <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_requirements.ttl> ;
                        prov:wasAssociatedWith <https://orcid.org/0000-0001-6907-0136> .
                } WHERE {
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Endpoint")) AS ?endpointDescription)
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Metadata")) AS ?metadataDescription)
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(CONCAT( str($rawEndpointUrl), "https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_requirements.ttl")), "Measure")) AS ?qualityMeasurement)
                }
            """
        ]
     ) ;
    kgi:onFailure (
        [
            mf:action """
                PREFIX prov: <http://www.w3.org/ns/prov#>
                PREFIX dqv: <http://www.w3.org/ns/dqv#>
                PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
                INSERT {
                    ?metadataDescription prov:wasGeneratedBy <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_requirements.ttl#activity> ;
                        dqv:hasQualityMeasurement ?qualityMeasurement .
                    ?qualityMeasurement a dqv:QualityMeasurement ;
                        rdfs:label "Usage requirements measurement" ;
                        dqv:computedOn ?endpointDescription ;
                        dqv:isMeasurementOf <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_requirements.ttl> ;
                        dqv:value "false"^^xsd:boolean ;
                        prov:generatedAtTime $dateLiteral .
                    <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_requirements.ttl> a dqv:Metric ;
                        rdfs:comment "What are the requirements to use the dataset?" ;
                        rdfs:label "Usage requirements" .
                    <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_requirements.ttl#activity> prov:used <https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_requirements.ttl> ;
                        prov:wasAssociatedWith <https://orcid.org/0000-0001-6907-0136> .
                } WHERE {
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Endpoint")) AS ?endpointDescription)
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(str($rawEndpointUrl)), "Metadata")) AS ?metadataDescription)
                    BIND(Iri(CONCAT("http://ns.inria.fr/kg/index#", MD5(CONCAT( str($rawEndpointUrl), "https://raw.githubusercontent.com/Jendersen/KG_accountability/main/rules/usage/how/usage_requirements.ttl")), "Measure")) AS ?qualityMeasurement)
                }
            """
        ]
     ) .
